---
title: "BitBucket Cheatsheet"
description:
parent: "Chapter 1: CI/CD Pipelines"
grand_parent : "CI/CD Pipelines"
order: 1
---

# BitBucket Cheatsheet

![](data:image/png;base64,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)

Bitbucket, developed by Atlassian, is a Git-based source code repository hosting service. It is designed for teams and provides strong integration with other Atlassian tools like Jira, Trello, and Confluence. This cheatsheet provides a detailed guide for mastering Bitbucket from basic operations to advanced features.

---

## **1. Introduction to Bitbucket**

### What is Bitbucket?

- Bitbucket is a Git-based platform for version control, CI/CD pipelines, and project collaboration.
- It supports both **private** and **public repositories**.
- Known for its seamless integration with Atlassian tools (e.g., Jira) and in-built CI/CD pipelines.

### Key Features

- Git repository hosting
- In-built CI/CD via **Bitbucket Pipelines**
- Jira integration for issue tracking
- Branch permissions and code review tools
- Supports Mercurial (deprecated)

---

## **2. Getting Started**

### Creating a Bitbucket Account

1. Go to [Bitbucket](https://bitbucket.org/) and sign up for an account.
2. Optionally, link your Atlassian account for better integration.

### Setting Up SSH Keys

1. Generate an SSH key:

   ```bash
   ssh-keygen -t rsa -b 4096 -C "your_email@example.com"
   ```

2. Add the public key to Bitbucket:
   - Navigate to **Personal Settings** → **SSH Keys** → **Add Key**.

### Creating a Repository

1. Log in to Bitbucket.
2. Go to **Repositories** → **Create Repository**.
3. Configure:
   - Repository Name
   - Access level (Private/Public)
   - Repository Type (Git)

---

## **3. Basic Operations**

### Cloning a Repository

```bash
git clone git@bitbucket.org:username/repository.git
```

### Staging, Committing, and Pushing

```bash
# Stage changes
git add .
# Commit changes
git commit -m "Initial commit"
# Push changes
git push origin main
```

### Pulling Changes

```bash
git pull origin main
```

---

## **4. Branching and Merging**

### Creating and Switching Branches

```bash
# Create a new branch
git checkout -b feature-branch
# Switch to an existing branch
git checkout main
```

### Pushing a Branch

```bash
git push origin feature-branch
```

### Creating a Pull Request (PR)

1. Open Bitbucket and navigate to **Pull Requests**.
2. Click **Create Pull Request**.
3. Select branches, add reviewers, and provide a description.

### Merging Pull Requests

1. Approve the PR.
2. Merge using the options:
   - **Merge Commit**: Keeps all commits intact.
   - **Squash Merge**: Combines all commits into one.
   - **Rebase**: Rewrites commit history.

---

## **5. Bitbucket Pipelines (CI/CD)**

### Overview

Bitbucket Pipelines is an integrated CI/CD service to automate builds, tests, and deployments.

### Enabling Pipelines

1. Go to the repository settings → **Pipelines**.
2. Enable Pipelines and configure the `.bitbucket-pipelines.yml` file.

### Sample Pipeline Configuration

```yaml
pipelines:
  default:
    - step:
        name: Build and Test
        image: node:14
        script:
          - npm install
          - npm test
    - step:
        name: Deploy to Production
        script:
          - echo "Deploying to production..."
```

### Key Triggers

- **default**: Runs on any branch when pushed.
- **branches**: Customizes triggers for specific branches.
- **tags**: Automates deployment for version tags.

### Variables and Secrets

1. Go to **Repository Settings** → **Pipelines** → **Environment Variables**.
2. Add sensitive variables like `AWS_ACCESS_KEY`.

#### Using Variables in Pipelines

```yaml
script:
  - echo "Using secret: $AWS_ACCESS_KEY"
```

---

## **6. Branch Permissions and Access Control**

### Branch Permissions

1. Go to **Repository Settings** → **Branch Permissions**.
2. Add rules such as:
   - Prevent direct pushes to `main`.
   - Require at least 2 code reviews before merging.

### User Roles

- **Admin**: Full control over repositories and permissions.
- **Write**: Can push and pull code.
- **Read**: Read-only access to repositories.

---

## **7. Integration with Jira**

### Linking a Repository to Jira

1. Go to **Repository Settings** → **Jira Settings**.
2. Connect the repository to a Jira project.

### Automating Issue Tracking

- Add Jira issue keys in commit messages:

  ```text
  PROJ-123: Fix login page bug
  ```

- Jira automatically links commits, pull requests, and deployments.

---

## **8. Code Review and Quality**

### Using Pull Requests for Code Review

1. Assign reviewers while creating a pull request.
2. Add comments inline to highlight issues.

### Integrating Code Quality Tools

- Add tools like **SonarCloud** or **CodeClimate** to your pipelines for static code analysis.
- Example: Adding SonarCloud to Bitbucket Pipelines:

  ```yaml
  - pipe: sonarsource/sonarcloud-scan:1.4.0
    variables:
      SONAR_TOKEN: $SONAR_TOKEN
  ```

---

## **9. Bitbucket API**

### Authenticating

Generate a personal access token:

1. Go to **Personal Settings** → **Access Management** → **Create App Password**.

Use the token in API calls:

```bash
curl -u username:app_password https://api.bitbucket.org/2.0/repositories
```

### Common API Endpoints

- List repositories:

  ```bash
  curl -X GET https://api.bitbucket.org/2.0/repositories/{username}
  ```

- Create an issue:

  ```bash
  curl -X POST -u username:app_password \
  -H "Content-Type: application/json" \
  -d '{"title": "Bug in Login Page", "content": {"raw": "Description"}}' \
  https://api.bitbucket.org/2.0/repositories/{username}/{repo}/issues
  ```

---

## **10. Advanced Features**

### Deployments with Bitbucket Pipelines

Track deployment environments:

1. Go to **Deployments** → Configure environments (e.g., Dev, Staging, Prod).

Add deployment steps in `.bitbucket-pipelines.yml`:

```yaml
pipelines:
  branches:
    main:
      - step:
          name: Deploy to Staging
          deployment: staging
          script:
            - ./deploy.sh staging
```

### Monorepo Support

Host multiple services in one repository:

- Use Pipelines for individual service builds:

  ```yaml
  pipelines:
    default:
      - step:
          name: Build Service A
          script:
            - cd services/service-a && npm install && npm test
  ```

### Mirror Repositories

Mirror a repository between Bitbucket and GitHub:

```bash
git remote add bitbucket git@bitbucket.org:username/repo.git
git push bitbucket --mirror
```

---

## **11. Security and Best Practices**

### Enforcing Two-Factor Authentication (2FA)

1. Go to **Personal Settings** → **Security** → Enable 2FA.

### Secret Scanning

Bitbucket scans for hard-coded credentials and alerts users.

### Dependency Scanning

Use Atlassian tools like **Snyk** or **Dependabot** to identify vulnerabilities.

---

## **12. Best Practices**

1. **Branch Naming Convention**:
   - Use prefixes like `feature/`, `bugfix/`, and `release/`.

   ```text
   feature/add-login-form
   bugfix/fix-authentication-error
   ```

2. **Commit Messages**:
   - Follow a format like:

     ```text
     [PROJ-123] Fix bug in login functionality
     ```

   - Reference Jira issues in commit messages.

3. **Automate Everything**:
   - Use Pipelines for CI/CD.
   - Automate linting, testing, and deployment.

4. **Use Pull Request Templates**:
   - Add `.bitbucket/pull_request_template.md` to standardize PR descriptions.

---

## **13. References and Resources**

- [Bitbucket Documentation](https://bitbucket.org/product/)
- [Bitbucket API Documentation](https://developer.atlassian.com/bitbucket/api/2/reference/)
- [Pipelines Guide](https://bitbucket.org/product/features/pipelines)


---
Follow me on : [Medium](https://medium.com/@neupane.krishna33)
[Linkedin](https://www.linkedin.com/in/krishna-neupane-50082091/)
[Researchgate](https://www.researchgate.net/profile/Krishna-Neupane)