---
title: "Lesson 4.5: Configure systems to mount file systems at boot by universally unique ID (UUID) or label"
description:
date: "2024-04-04"
parent: "Chapter 4: Configure local storage"
grand_parent : "Redhat Enterprise Linux 9 - EX200 RHCSA"
order: 5
completed: true
---
## Temporary Mounting
```bash /ext4/
# Changing the File System 
[root@server ~]# mkfs.ext4 /dev/nvme0n2p1 
mke2fs 1.46.5 (30-Dec-2021)
/dev/nvme0n2p1 contains a ext4 file system
	last mounted on Tue Apr  9 21:41:07 2024
Proceed anyway? (y,N) y
Creating filesystem with 51200 1k blocks and 12824 inodes
Filesystem UUID: 2dc18bf3-395d-4650-aeef-21ec8356e631
Superblock backups stored on blocks: 
	8193, 24577, 40961

Allocating group tables: done                            
Writing inode tables: done                            
Creating journal (4096 blocks): done
Writing superblocks and filesystem accounting information: done

# Changing the File System 
[root@server ~]# mkfs.ext4 /dev/nvme0n2p2
mke2fs 1.46.5 (30-Dec-2021)
/dev/nvme0n2p2 contains a ext4 file system
	last mounted on Tue Apr  9 21:45:59 2024
Proceed anyway? (y,N) y
Creating filesystem with 102400 1k blocks and 25584 inodes
Filesystem UUID: 50073dac-ebcb-4121-89be-5b7fbe4c9f2b
Superblock backups stored on blocks: 
	8193, 24577, 40961, 57345, 73729

Allocating group tables: done                            
Writing inode tables: done                            
Creating journal (4096 blocks): done
Writing superblocks and filesystem accounting information: done 

[root@server ~]# blkid /dev/nvme0n2p1 
/dev/nvme0n2p1: UUID="2dc18bf3-395d-4650-aeef-21ec8356e631" TYPE="ext4" PARTLABEL="Linux filesystem" PARTUUID="a6369c3e-805f-4558-b7e4-a7e780b6ef8f"
[root@server ~]# blkid /dev/nvme0n2p2 
/dev/nvme0n2p2: UUID="50073dac-ebcb-4121-89be-5b7fbe4c9f2b" TYPE="ext4" PARTLABEL="Linux filesystem" PARTUUID="c6f6a57b-055f-451e-ad6a-7d48c9f8aa7d"

```

```bash {16,17}
# Temporary mounting of /dev/nvme0n2p1 with /data1 
[root@server ~]# mount /dev/nvme0n2p1 /data1 
# Temporary mounting of /dev/nvme0n2p2 with /data2
[root@server ~]# mount /dev/nvme0n2p2 /data2

[root@server ~]# lsblk 
NAME        MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
sr0          11:0    1 1024M  0 rom  
nvme0n1     259:0    0   20G  0 disk 
├─nvme0n1p1 259:1    0  600M  0 part /boot/efi
├─nvme0n1p2 259:2    0    1G  0 part /boot
└─nvme0n1p3 259:3    0 18.4G  0 part 
  ├─cs-root 253:0    0 16.4G  0 lvm  /
  └─cs-swap 253:1    0    2G  0 lvm  [SWAP]
nvme0n2     259:4    0    5G  0 disk 
├─nvme0n2p1 259:5    0   50M  0 part /data1
└─nvme0n2p2 259:6    0  100M  0 part /data2
nvme0n3     259:7    0    6G  0 disk 
```

## Permanent Mounting

```bash {30,31,45,46}
#View the UUID of the partition
[root@server ~]# blkid /dev/nvme0n2p1 
/dev/nvme0n2p1: UUID="2dc18bf3-395d-4650-aeef-21ec8356e631" TYPE="ext4" PARTLABEL="Linux filesystem" PARTUUID="a6369c3e-805f-4558-b7e4-a7e780b6ef8f"
#View the UUID of the partition
[root@server ~]# blkid /dev/nvme0n2p2 
/dev/nvme0n2p2: UUID="50073dac-ebcb-4121-89be-5b7fbe4c9f2b" TYPE="ext4" PARTLABEL="Linux filesystem" PARTUUID="c6f6a57b-055f-451e-ad6a-7d48c9f8aa7d"

#Edit the configutation folder and add the entry 
[root@server ~]# cat /etc/fstab 

#
# /etc/fstab
# Created by anaconda on Wed Dec  6 04:59:06 2023
#
# Accessible filesystems, by reference, are maintained under '/dev/disk/'.
# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info.
#
# After editing this file, run 'systemctl daemon-reload' to update systemd
# units generated from this file.
#
/dev/mapper/cs-root     /                       xfs     defaults        0 0
UUID=a6688c93-a9d4-448e-9cf7-88112b5bdb22 /boot                   xfs     defaults        0 0
UUID=F945-941E          /boot/efi               vfat    umask=0077,shortname=winnt 0 2
/dev/mapper/cs-swap     none                    swap    defaults        0 0


# FORMAT OF THIS FILE
# <PARTITION_NAME>      <MOUNT_POINT>   <FSTYPE>        <MOUNT OPTIONS>         0       0

#USING UUID -----------------------------------------------------------------------------
UUID="2dc18bf3-395d-4650-aeef-21ec8356e631"     /data1  ext4    defaults        0       0
UUID="50073dac-ebcb-4121-89be-5b7fbe4c9f2b"     /data2  ext4    defaults        0       0

#USING LABEL ----------------------------------------------------------------------------
/dev/nvme0n2p1                                  /data1  ext4    defaults        0       0

# Updating the changes
[root@server ~]# systemctl daemon-reload 
[root@server ~]# mount -a

[root@server ~]# lsblk 
NAME        MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
sr0          11:0    1 1024M  0 rom  
nvme0n1     259:0    0   20G  0 disk 
├─nvme0n1p1 259:1    0  600M  0 part /boot/efi
├─nvme0n1p2 259:2    0    1G  0 part /boot
└─nvme0n1p3 259:3    0 18.4G  0 part 
  ├─cs-root 253:0    0 16.4G  0 lvm  /
  └─cs-swap 253:1    0    2G  0 lvm  [SWAP]
nvme0n2     259:4    0    5G  0 disk 
├─nvme0n2p1 259:5    0   50M  0 part /data1
└─nvme0n2p2 259:6    0  100M  0 part /data2
nvme0n3     259:7    0    6G  0 disk 

```

## Unmounting 
```bash     {11,12 ,27,28, 43,44} /umount/
[root@server ~]# lsblk 
NAME        MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
sr0          11:0    1 1024M  0 rom  
nvme0n1     259:0    0   20G  0 disk 
├─nvme0n1p1 259:1    0  600M  0 part /boot/efi
├─nvme0n1p2 259:2    0    1G  0 part /boot
└─nvme0n1p3 259:3    0 18.4G  0 part 
  ├─cs-root 253:0    0 16.4G  0 lvm  /
  └─cs-swap 253:1    0    2G  0 lvm  [SWAP]
nvme0n2     259:4    0    5G  0 disk 
├─nvme0n2p1 259:5    0   50M  0 part /data1
└─nvme0n2p2 259:6    0  100M  0 part /data2
nvme0n3     259:7    0    6G  0 disk 

[root@server ~]# umount /data1 

[root@server ~]# lsblk 
NAME        MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
sr0          11:0    1 1024M  0 rom  
nvme0n1     259:0    0   20G  0 disk 
├─nvme0n1p1 259:1    0  600M  0 part /boot/efi
├─nvme0n1p2 259:2    0    1G  0 part /boot
└─nvme0n1p3 259:3    0 18.4G  0 part 
  ├─cs-root 253:0    0 16.4G  0 lvm  /
  └─cs-swap 253:1    0    2G  0 lvm  [SWAP]
nvme0n2     259:4    0    5G  0 disk 
├─nvme0n2p1 259:5    0   50M  0 part 
└─nvme0n2p2 259:6    0  100M  0 part /data2
nvme0n3     259:7    0    6G  0 disk 

[root@server ~]# umount /data2

[root@server ~]# lsblk 
NAME        MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
sr0          11:0    1 1024M  0 rom  
nvme0n1     259:0    0   20G  0 disk 
├─nvme0n1p1 259:1    0  600M  0 part /boot/efi
├─nvme0n1p2 259:2    0    1G  0 part /boot
└─nvme0n1p3 259:3    0 18.4G  0 part 
  ├─cs-root 253:0    0 16.4G  0 lvm  /
  └─cs-swap 253:1    0    2G  0 lvm  [SWAP]
nvme0n2     259:4    0    5G  0 disk 
├─nvme0n2p1 259:5    0   50M  0 part 
└─nvme0n2p2 259:6    0  100M  0 part 
nvme0n3     259:7    0    6G  0 disk 
```

### Remounting a Partition 
```bash  {4}
[root@server dev]# mount | grep data1 
/dev/nvme0n2p1 on /data1 type ext4 (rw,relatime,seclabel)

[root@server dev]# mount -o remount,ro /data1 

[root@server dev]# mount | grep /data1 
/dev/nvme0n2p1 on /data1 type ext4 (ro,relatime,seclabel)
```