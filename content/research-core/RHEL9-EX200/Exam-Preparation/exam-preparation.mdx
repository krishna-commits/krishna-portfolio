---
title: "Exam Preparation"
description: 
date: "2024-04-02"
parent: "Redhat Enterprise Linux 9 - EX200 RHCSA"
grand_parent : null
order: 11
---

## P1 :  How would you change hostname of your system?
```bash 
[root@server ~]# hostnamectl set-hostname www.server.com
[root@server ~]# exec bash 
[root@www ~]# hostname
www.server.com
```

---

## P2 : How would you recover root password if you forget it?
- Reboot the system 
- Press `shift` key continuosly
- Select `Rescue mode` using the `e` key.
- After `quiet` add `rd.break`, and press ctrl+x.
- A command line interface will appear with a blink. Press enter if no texts appear.
- Then write the commmand `mount -o remount,rw /sysroot`
- Then write the command `chroot /sysroot`
- Then write the command to change password `passwd`
- Then write the command `touch /.autorelabel`
- Then exit `exit`
- Then reboot `reboot`

---

## P3 : How would you create groups?

```bash
[root@www ~]# groupadd managers 
[root@www ~]# groupadd admins 
[root@www ~]# groupadd employees
```
---

## P4 : How would you create a user with given primary group, secondary group, uid & shell?
```bash
# Primary Group (-g) / Secondary Group (-G) / Shell (-s) / UID (-u)
[root@www ~]# useradd -g employees -G managers rabi 
[root@www ~]# useradd -G managers,admins aakash 
[root@www ~]# useradd -s /sbin/nologin -u 5000 subodh 

[root@www ~]# passwd rabi
[root@www ~]# passwd aakash
[root@www ~]# passwd subodh

# File for user and groups
[root@www ~]# cat /etc/passwd 
rabi:x:1001:1003::/home/rabi:/bin/bash
aakash:x:1002:1004::/home/aakash:/bin/bash
subodh:x:5000:5000::/home/subodh:/sbin/nologin

[root@www ~]# cat /etc/group
employees:x:1003:
aakash:x:1004:
subodh:x:5000:

# View user's specific group / Format <user> : <primary group> <secondary group 1> <secondary group 2> ...
[root@www ~]# groups subodh 
subodh : subodh
[root@www ~]# groups aakash 
aakash : aakash managers admins

# Policy for a user to change password in specific date
[root@www ~]# chage -M 50 aakash
# List the policies
[root@www ~]# chage -l aakash 
Last password change					: Oct 01, 2024
Password expires					: Nov 20, 2024
Password inactive					: never
Account expires						: never
Minimum number of days between password change		: 0
Maximum number of days between password change		: 50
Number of days of warning before password expires	: 7

# Set the system in such a way that when creating a user 50 days policy is set
[root@www ~]# cat /etc/login.defs | grep PASS_MAX_DAYS 
PASS_MAX_DAYS	50

# Change the password in next login 
[root@www ~]# chage -d 0 aakash 
```
---

## P5 : How would you set the permission on a file or directory? How would you set SGID bit & Sticky bit on a directory?
```bash
[root@www var]# ls -ld /var/dept 
drwxr-xr-x. 2 root root 6 Oct  1 20:10 /var/dept

# To change user ownership and group ownership chwon <owner>:<group> <file/dir>
[root@www var]# chown root:managers /var/dept
[root@www var]# ls -ld /var/dept/
drwxr-xr-x. 2 root managers 6 Oct  1 20:10 /var/dept/

# give permission owner : full, group full , other : no permission
[root@www var]# chmod 770 /var/dept/
[root@www var]# ls -ld /var/dept/
drwxrwx---. 2 root managers 6 Oct  1 20:10 /var/dept/

# SGID / Inherit group ownership of manager when any group users create files/dirs.
[root@www ~]# chmod g+s /var/dept 
[root@www ~]# ls -ld /var/dept 
drwxrws---. 3 root managers 26 Oct  1 20:20 /var/dept

[rabi@www ~]$ touch /var/dept/f3 
[rabi@www ~]$ ls -lh /var/dept/f3 
-rw-r--r--. 1 rabi managers 0 Oct  1 20:22 /var/dept/f3

# SUID / Only allow owner to delete the files 
root@www ~]# chmod o+t /var/dept
[root@www ~]# ls -ld /var/dept/
drwxrws--T. 3 root managers 36 Oct  1 20:22 /var/dept/

[aakash@www ~]$ rm -rf /var/dept/d1 
rm: cannot remove '/var/dept/d1': Operation not permitted
```
---

## P6 : How would you set password expiry date for a user?
```bash
[root@www ~]# chage -M 100 aakash 
[root@www ~]# chage -l aakash 
Last password change					: password must be changed
Password expires					: password must be changed
Password inactive					: password must be changed
Account expires						: never
Minimum number of days between password change		: 0
Maximum number of days between password change		: 100
Number of days of warning before password expires	: 7
```
---

## P7 : How would you set umask value as per requirement?
```bash 
[root@www ~]# umask 
0022

[root@www ~]# umask 0220 
[root@www ~]# umask 
0220

# To change on boot time, add umask <value> in .bashrc
```
---

## P8 : How would you search files using find command and how would you take action on the found files?
```bash
# Example 1 
[root@www rabi_backup]# find / -user rabi -exec cp -rp {} /root/rabi_backup/ \; 
# Example 2 
[root@www conf_backup]# find / -name *conf -exec cp {} /root/conf_backup/ \; 
```
---

## P9 :  How would you set static IP address, netmask, gateway & DNS while configuring network?
```bash
# Check the Network Interface name (ifname)
[root@www ~]# ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: ens160: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 00:0c:29:52:db:8f brd ff:ff:ff:ff:ff:ff
    altname enp2s0
    inet 192.168.202.215/21 brd 192.168.207.255 scope global dynamic noprefixroute ens160
       valid_lft 2454sec preferred_lft 2454sec
    inet6 fe80::59b0:a94f:4de7:7e35/64 scope link noprefixroute 
       valid_lft forever preferred_lft forever

[root@www ~]# nmcli conn add type ethernet ifname ens160 con-name custom_entry ipv4.addresses 192.168.205.100/21 ipv4.dns 192.168.200.1 ipv4.gateway 192.168.200.1 ipv4.method manual  
Connection 'custom_entry' (260b9520-54dc-475f-8184-02021ad5d1f5) successfully added.

[root@www ~]# cat /etc/NetworkManager/system-connections/custom_entry.nmconnection 
[connection]
id=custom_entry
uuid=260b9520-54dc-475f-8184-02021ad5d1f5
type=ethernet
interface-name=ens160

[ethernet]

[ipv4]
address1=192.168.205.100/21,192.168.200.1
dns=192.168.200.1;
method=manual

[ipv6]
addr-gen-mode=default
method=auto

[proxy]

# By modifying
[root@server exam]# nmcli conn modify testconnection ipv4.addresses 192.168.208.101/24 
[root@server exam]# nmcli conn modify testconnection ipv4.gateway 192.168.208.2 
[root@server exam]# nmcli conn modify testconnection ipv4.dns 192.168.208.2 
[root@server exam]# nmcli conn modify testconnection ipv4.method manual

[root@server exam]# systemctl restart NetworkManager

[root@server exam]# nmcli conn show 
NAME                UUID                                  TYPE      DEVICE 
testconnection      539e579c-5728-49e9-9568-34e4bb0cf118  ethernet  ens160 
lo                  ff6f865b-5028-4b44-8296-e3f07b2dafa2  loopback  lo     
Wired connection 1  4569ab1e-41c7-4a01-bb5b-d02ad68c5d8b  ethernet  --     

[root@server exam]# nmcli conn down testconnection 
Connection 'testconnection' successfully deactivated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/2)

[root@server exam]# nmcli conn up testconnection 
Connection successfully activated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/4)

[root@server exam]# cat /etc/NetworkManager/system-connections/testconnection.nmconnection 
[connection]
id=testconnection
uuid=539e579c-5728-49e9-9568-34e4bb0cf118
type=ethernet
interface-name=ens160
timestamp=1728221653

[ethernet]

[ipv4]
address1=192.168.208.101/24,192.168.208.2
dns=192.168.208.2;
method=manual

[ipv6]
addr-gen-mode=default
method=auto

[proxy]


```
---

## P10 :  How would you search a pattern in a file using grep command and list the pattern matching lines?
```bash
# To overwrite or create a new file for storing output from grep with lines bash 
[root@www ~]# grep bash /etc/passwd >/root/grepout 
# To append into a file 
[root@www ~]# grep subodh /etc/passwd >>/root/grepout 
# > filename → Redirects the standard output to the given file ( overwrites the file if the file already exists )
# >> filename → Appends the standard output at the bottom of the given file ( does not overwrite the content of the file if the file already exists )
# 2> filename → Redirects the standard error to the given file ( overwrites content of the file if the file already exists)
# 2>> filename → Appends the standard error at the bottom of the given file ( does not overwrite content of the file if the file already exists )
# > filename 2>&1 → Redirects both the standard output and standard error to the given file
# Output displayed in screen but error is lost 2> /dev/null
```
---

## P11 : How would you compress a file?
```bash 
# Compressing using gzip
[root@www ~]# gzip f1 
# Decompressing using gzip
[root@www ~]# gunzip f1.gzip

# Compressing using bzip2
[root@www ~]# bzip2 f1 
# Decompressing using bzip2
[root@www ~]# bunzip2 f1.bzip2
```
---

## P12 :  How would you create a tar archive? Also, how would you create a compressed archive?
```bash 
# Archiving a file 
[root@www ~]# tar -cvf yumrepo.tar /etc/yum.repos.d 

# Listing inside an archived file 
[root@www ~]# tar -xvf yumrepo.tar

# Adding a new file inside the archived file
[root@www ~]# tar -rvf yumrepo.tar f1 

# Compressing tar file with gzip 
[root@www ~]# gzip yumrepos.tar 
[root@www ~]# ls
f1  yumrepos.tar.gz

# UnCompressing tar file with gzip 
[root@www ~]# gunzip yumrepos.tar.gz 
[root@www ~]# ls
f1  yumrepos.tar

# Compressing tar file with bzip2 
[root@www ~]# bzip2 yumrepos.tar 
[root@www ~]# ls
f1  yumrepos.tar.bz2

# UnCompressing tar file with bzip2 
[root@www ~]# bunzip2 yumrepos.tar.bz2 
[root@www ~]# ls
f1  yumrepos.tar

# Archiving and compressing with gzip at same time
[root@www ~]# tar -zcvf yumrepos.tar.gzip /etc/

# Archiving and compressing with bzip2 at same time
[root@www ~]# tar -jcvf yumrepos.tar.bzip2 /etc/*.conf

```
---

## P13 : How would you save output of a command into a file without overwriting existing content of the file?
```bash 
[root@www ~]# date >> date_log 
[root@www ~]# date >> date_log 
[root@www ~]# date >> date_log 

[root@www ~]# cat date_log 
Tue Oct  1 10:44:24 PM +0545 2024
Tue Oct  1 10:44:29 PM +0545 2024
Tue Oct  1 10:44:35 PM +0545 2024
```
---

## P14 : How would you create a bash shell script and set PATH of the script directory?
```bash 
# Temporary setting of path
[root@www ~]# export PATH=$PATH:/root/scripts

# Permanent setting of path 
[root@www ~]# vim .bash
PATH=$PATH:/root/scripts
```
---

## P15 : How would you configure your system to point to a YUM repository for managing packages using yum? 
```bash 
# If not verifying signature question
[root@www yum.repos.d]# vim test.repo
[root@www yum.repos.d]# cat test.repo 
[test]
name=Test Repo
baseurl = http://192.168.205.101/softwares/rhel9
enabled = 1
gpgcheck = 0

[root@www yum.repos.d]# yum clean all 
[root@www yum.repos.d]# yum list all 

# If verifying signature and point to the key question 
[root@www yum.repos.d]# vim test.repo
[root@www yum.repos.d]# cat test.repo 
[test]
name=Test Repo
baseurl = http://192.168.205.101/softwares/rhel9
enabled = 1
gpgcheck = 1
gpgkey = http://192.168.205.101/key/rhel9-key
```
---

## P16 : How would you switch to the recommended tuning profile?
```bash 
# Install and enable tuned 
[root@server ~]# rpm -q tuned
tuned-2.24.0-1.el9.noarch
[root@server ~]# yum -y install tuned
[root@server ~]# systemctl start tuned 
[root@server ~]# systemctl enable tuned 
[root@server ~]# systemctl status tuned 
● tuned.service - Dynamic System Tuning Daemon
     Loaded: loaded (/usr/lib/systemd/system/tuned.service; enabled; preset: enabled)
     Active: active (running) since Wed 2024-10-02 14:59:40 +0545; 10s ago
       Docs: man:tuned(8)
             man:tuned.conf(5)
             man:tuned-adm(8)
   Main PID: 4048 (tuned)
      Tasks: 4 (limit: 22565)
     Memory: 15.8M
        CPU: 212ms
     CGroup: /system.slice/tuned.service
             └─4048 /usr/bin/python3 -Es /usr/sbin/tuned -l -P

Oct 02 14:59:40 server systemd[1]: Starting Dynamic System Tuning Daemon...
Oct 02 14:59:40 server systemd[1]: Started Dynamic System Tuning Daemon.

# To view all the list
[root@server ~]# tuned-adm list
Available profiles:
- accelerator-performance     - Throughput performance based tuning with disabled higher latency STOP states
- aws                         - Optimize for aws ec2 instances
- balanced                    - General non-specialized tuned profile
- balanced-battery            - Balanced profile biased towards power savings changes for battery
- desktop                     - Optimize for the desktop use-case
- hpc-compute                 - Optimize for HPC compute workloads
- intel-sst                   - Configure for Intel Speed Select Base Frequency
- latency-performance         - Optimize for deterministic performance at the cost of increased power consumption
- network-latency             - Optimize for deterministic performance at the cost of increased power consumption, focused on low latency network performance
- network-throughput          - Optimize for streaming network throughput, generally only necessary on older CPUs or 40G+ networks
- optimize-serial-console     - Optimize for serial console use.
- powersave                   - Optimize for low power consumption
- throughput-performance      - Broadly applicable tuning that provides excellent performance across a variety of common server workloads
- virtual-guest               - Optimize for running inside a virtual guest
- virtual-host                - Optimize for running KVM guests
Current active profile: virtual-guest

# View the active
[root@server ~]# tuned-adm active
Current active profile: virtual-guest

# View the recommended 
[root@server ~]# tuned-adm recommend 
virtual-guest

# To set a profile
[root@server ~]# tuned-adm profile desktop 
# Sometime interviewer can change to non recommended profile, which will make the system slow 
# So, you need to adjust with the recommended one 
[root@server ~]# tuned-adm profile virtual-guest
```
---

## P17 :  How would you configure your system to configure a apache website that listens on non-default port and that can be accessed from remote host?
```bash 
# Installation and service
[root@server ~]# rpm -q httpd 
httpd-2.4.62-1.el9.aarch64
[root@server ~]# systemctl start httpd 
[root@server ~]# systemctl enable httpd 

# Creating a HTML page 
[root@server html]# pwd 
/var/www/html
[root@server html]# cat index.html
<h1>This is a website !</h1>

# Checking the default port 
[root@server html]# netstat -tnl | grep 80 
tcp6       0      0 :::80                   :::*                    LISTEN

# Change the default listning port
[root@server ~]# vi /etc/httpd/conf/httpd.conf 
Listen 5566

# Restart the service httpd & check if listening - FAILED !
[root@server ~]# systemctl restart httpd
Job for httpd.service failed because the control process exited with error code.
See "systemctl status httpd.service" and "journalctl -xeu httpd.service" for details.
[root@server ~]# curl http://192.168.205.68:5566
curl: (7) Failed to connect to 192.168.205.68 port 5566: Connection refused
# The error log is 
[root@server ~]# tail -20 /var/log/messages
Oct  2 15:24:08 backupserver httpd[5211]: (13)Permission denied: AH00072: make_sock: could not bind to address 0.0.0.0:5566
...
[root@server ~]# tail /var/log/httpd/error_log
[Wed Oct 02 15:19:01.588773 2024] [core:notice] [pid 4580:tid 4580] SELinux policy enabled; httpd running as context system_u:system_r:httpd_t:s0

#  Check if SELinux enabled 
[root@server ~]# getenforce 
Enforcing

# If a new port is assigned in system where SElinux is enabled , then you need to inform SELinux.
# You can find the adding code in [root@server ~]# vim /etc/ssh/sshd_config 
# semanage port -a -t ssh_port_t -p tcp #PORTNUMBER
# use -d to remove , -a to add

[root@server ~]# semanage port -a -t http_port_t -p tcp 5566
[root@server ~]# systemctl restart httpd 
[root@server ~]# systemctl enable httpd 

# Now you have the port running
[root@server ~]# curl http://192.168.205.68:5566 
<h1>This is a website !</h1>
[root@server ~]# netstat -tnl | grep 5566
tcp6       0      0 :::5566                 :::*                    LISTEN  

# To access from outside environment 
[root@server ~]# firewall-cmd --permanent --add-port=5566/tcp 
success
[root@server ~]# firewall-cmd --reload 
success
[root@server ~]# firewall-cmd --list-all 
public (active)
  target: default
  icmp-block-inversion: no
  interfaces: ens160
  sources: 
  services: cockpit dhcpv6-client ssh
  ports: 5566/tcp
  protocols: 
  forward: yes
  masquerade: no
  forward-ports: 
  source-ports: 
  icmp-blocks: 
  rich rules: 
```
---

## P18 :  How would you schedule a cron job?
```bash 
# Schedule a job from a user, that runs at 9 am every day.
# Check installed package and status 
[root@www yum.repos.d]# rpm -q cronie 
cronie-1.5.7-10.el9.aarch64
[root@www yum.repos.d]# systemctl status crond

# To allow and deny users to access crontab, modify the file cron.allow & cron.deny

[student@server ~]$ crontab -e 
#Question: Set up a cron job for the user student that runs the /usr/local/bin/backup.sh script every day at 2:00 AM.
0 2 * * * /usr/local/bin/backup.sh
# Question: Create a cron job that deletes all .log files from /var/logs/archive every Sunday at 4:30 PM.
30 16 * * 0 /usr/bin/find /var/logs/archive -name "*.log" -delete
# Question: Schedule a cron job for the user devops that runs the /opt/check_status.sh script every 15 minutes.
*/15 * * * * /opt/check_status.sh
# Question: Create a cron job that runs /usr/local/bin/clean_tmp.sh every day at 3:00 AM and sends the output to /var/log/cleanup.log.
0 3 * * * /usr/local/bin/clean_tmp.sh > /var/log/cleanup.log 
# Question: Schedule a cron job that runs /usr/bin/system_report every day at 5:00 PM, but only during June and December.
0 17 * 6,12 * /usr/bin/system_report
# Question: You want to schedule a job that runs /usr/bin/disk_usage.sh every hour but do not want any email notifications. How would you achieve this?
0 * * * * /usr/bin/disk_usage.sh > /dev/null 2>&1
# Question: Set up a cron job that runs /opt/process_data.sh every 30 minutes, but only between 9:00 AM and 5:00 PM from Monday to Friday.
*/30 9-17 * * 1-5 /opt/process_data.sh

# To list 
[student@server ~]$ crontab -l

# To remove
[student@server ~]$ crontab -release 
```
---

## P19 : How would you connect your system to the NTP server?
```bash 
# Configure NTP with server : rhel9svr.example.com
# Install required package 
[root@server ~]# rpm -q chrony 
chrony-4.6-1.el9.aarch64
[root@server ~]#  yum -y install chrony 

# Make modification in this file
[root@server ~]# vim /etc/chrony.conf 
# pool 2.centos.pool.ntp.org iburst
server us.pool.ntp.org iburst

[root@server ~]# systemctl restart chronyd
[root@server ~]# systemctl status chronyd 
● chronyd.service - NTP client/server
     Loaded: loaded (/usr/lib/systemd/system/chronyd.service; enabled; preset: enabled)
     Active: active (running) since Sun 2024-10-06 20:37:12 CST; 11s ago
       Docs: man:chronyd(8)
             man:chrony.conf(5)
    Process: 13349 ExecStart=/usr/sbin/chronyd $OPTIONS (code=exited, status=0/SUCCESS)
   Main PID: 13352 (chronyd)
      Tasks: 1 (limit: 22565)
     Memory: 908.0K
        CPU: 31ms
     CGroup: /system.slice/chronyd.service
             └─13352 /usr/sbin/chronyd -F 2

[root@server ~]# timedatectl set-ntp true
[root@server ~]# timedatectl 
               Local time: Sun 2024-10-06 20:48:52 CST
           Universal time: Sun 2024-10-06 12:48:52 UTC
                 RTC time: Sun 2024-10-06 17:40:15
                Time zone: Asia/Shanghai (CST, +0800)
System clock synchronized: yes
              NTP service: active
          RTC in local TZ: no


# Check 
[root@server ~]# chronyc sources 
MS Name/IP address         Stratum Poll Reach LastRx Last sample               
===============================================================================
^* mailhost.netads.com           2   6   377    30    -31ms[  -34ms] +/-  226ms
[root@server ~]# chronyc sources -v

  .-- Source mode  '^' = server, '=' = peer, '#' = local clock.
 / .- Source state '*' = current best, '+' = combined, '-' = not combined,
| /             'x' = may be in error, '~' = too variable, '?' = unusable.
||                                                 .- xxxx [ yyyy ] +/- zzzz
||      Reachability register (octal) -.           |  xxxx = adjusted offset,
||      Log2(Polling interval) --.      |          |  yyyy = measured offset,
||                                \     |          |  zzzz = estimated error.
||                                 |    |           \
MS Name/IP address         Stratum Poll Reach LastRx Last sample               
===============================================================================
^* mailhost.netads.com           2   6   377    33    -31ms[  -34ms] +/-  226ms


```
---

## P20 : How would you create a GPT-based disk partition, format it & mount it permanently?
```bash 
[root@server ~]# gdisk /dev/nvme0n2 

# Creating GPT-based Disk Partition
# Create New Partitions
Command (? for help): n
Partition number (1-128, default 1): 1
First sector (34-10485726, default = 2048) or {+-}size{KMGTP}: 
Last sector (2048-10485726, default = 10485726) or {+-}size{KMGTP}: 1G
Current type is 8300 (Linux filesystem)
Hex code or GUID (L to show codes, Enter = 8300): 
Changed type of partition to 'Linux filesystem'
# Print Partitions
Command (? for help): p
Number  Start (sector)    End (sector)  Size       Code  Name
   1            2048         2097152   1023.0 MiB  8300  Linux filesystem
# Save and Exit
Command (? for help): w
The operation has completed successfully.

#-------

# Formating the partition
[root@server ~]# lsblk 
nvme0n2     259:4    0    5G  0 disk 
└─nvme0n2p1 259:10   0 1023M  0 part 

[root@server ~]# mkfs -t xfs /dev/nvme0n2p1
[root@server ~]# blkid /dev/nvme0n2p1 
/dev/nvme0n2p1: UUID="4acfbb7f-e1ad-4893-ba19-116ff77e7458" TYPE="xfs" PARTLABEL="Linux filesystem" PARTUUID="87614e42-08ff-4397-81b9-9e824a5b312f"
# To wipe fs : wipefs -a /dev/nvme0n2p1

# Mounting the partition (Temporary)
[root@server ~]# mount /dev/nvme0n2p1 /root/data1 

# Mounting the partition (Permanent)
[root@server ~]# vim /etc/fstab
[root@server ~]# tail -1 /etc/fstab 
/dev/nvme0n2p1		/root/data1	xfs	defaults	0	0

[root@server ~]# systemctl daemon-reload 
[root@server ~]# mount -a 
[root@server ~]# lsblk 
NAME        MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
nvme0n2     259:4    0    5G  0 disk 
└─nvme0n2p1 259:9    0 1023M  0 part /root/data1


```
---

## P21 : How would you create a DOS-based (MBR-based) disk partition, format it using swap and activate the swap partition permanently?
```bash 
# Creating a partition
[root@server ~]# fdisk /dev/nvme0n3 

Command (m for help): n
Partition number (1-128, default 1): 
First sector (34-12582878, default 2048): 
Last sector, +/-sectors or +/-size{K,M,G,T,P} (2048-12582878, default 12582878): 2G
Value out of range.
Last sector, +/-sectors or +/-size{K,M,G,T,P} (2048-12582878, default 12582878): +2G
Created a new partition 1 of type 'Linux filesystem' and of size 2 GiB.

Command (m for help): p
Device         Start     End Sectors Size Type
/dev/nvme0n3p1  2048 4196351 4194304   2G Linux filesystem

Command (m for help): w
The partition table has been altered.
Calling ioctl() to re-read partition table.
Syncing disks.

# Making File System
[root@server ~]# mkswap /dev/nvme0n3p1
Setting up swapspace version 1, size = 2 GiB (2147479552 bytes)
no label, UUID=a772e8bb-a71e-4ca2-a8ea-b0d23cc0bdc6
[root@server ~]# blkid /dev/nvme0n3p1 
/dev/nvme0n3p1: UUID="a772e8bb-a71e-4ca2-a8ea-b0d23cc0bdc6" TYPE="swap" PARTUUID="20c7dcf6-28d4-d648-bff1-688304ef7762"

# Mounting
[root@server ~]# vi /etc/fstab 
[root@server ~]# tail -1 /etc/fstab 
/dev/nvme0n3p1		swap		swap	defaults	0	0
[root@server ~]# swapon -a 
```
---

## P22 : How would you create a volume group with specified PE size?
```bash 
# Create a partition with 8e using fdisk or gdisk
# If you want to create LV of specified size, then make the partition with a bit more size as it will be reduced.
[root@server ~]# gdisk /dev/nvme0n4

Command (? for help): n
Partition number (1-128, default 1): 
First sector (34-10485726, default = 2048) or {+-}size{KMGTP}: 
Last sector (2048-10485726, default = 10485726) or {+-}size{KMGTP}: +650M
Current type is 8300 (Linux filesystem)                      
Hex code or GUID (L to show codes, Enter = 8300): 8e00
Changed type of partition to 'Linux LVM'

Command (? for help): p
Number  Start (sector)    End (sector)  Size       Code  Name
   1            2048         1333247   650.0 MiB   8E00  Linux LVM

# Create Physical Volume
[root@server ~]# pvcreate /dev/nvme0n4p1
Physical volume "/dev/nvme0n4p1" successfully created.

[root@server ~]# pvdisplay /dev/nvme0n4p1 
  "/dev/nvme0n4p1" is a new physical volume of "650.00 MiB"
  --- NEW Physical volume ---
  PV Name               /dev/nvme0n4p1
  VG Name               
  PV Size               650.00 MiB
  Allocatable           NO
  PE Size               0   
  Total PE              0
  Free PE               0
  Allocated PE          0
  PV UUID               T0lKB9-us7O-EyQe-RdEN-3Xxc-Ui62-cf05TT

# Create a VG, if the PE size is specified then add -s <size> , else a default 4M PE size will be set
[root@server ~]# vgcreate -s 8M testvg /dev/nvme0n4p1
Volume group "testvg" successfully created

[root@server ~]# vgs 
  VG     #PV #LV #SN Attr   VSize   VFree  
  cs       1   2   0 wz--n-  18.41g      0 
  testvg   1   0   0 wz--n- 648.00m 648.00m

[root@server ~]# vgdisplay testvg
  --- Volume group ---
  VG Name               testvg
  System ID             
  Format                lvm2
  Metadata Areas        1
  Metadata Sequence No  1
  VG Access             read/write
  VG Status             resizable
  MAX LV                0
  Cur LV                0
  Open LV               0
  Max PV                0
  Cur PV                1
  Act PV                1
  VG Size               648.00 MiB
  PE Size               8.00 MiB
  Total PE              81
  Alloc PE / Size       0 / 0   
  Free  PE / Size       81 / 648.00 MiB
  VG UUID               TrdrJJ-WNhT-MXVK-pfLK-K1fX-sJXG-F7yO2r
   
# Create a LV
[root@server ~]# lvcreate -L 600M -n testlv1 testvg
  Logical volume "testlv1" created.

[root@server ~]# lvs
  LV      VG     Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
  root    cs     -wi-ao----  16.41g                                                    
  swap    cs     -wi-ao----   2.00g                                                    
  testlv1 testvg -wi-a----- 600.00m                                                    

[root@server ~]# lvdisplay /dev/testvg/testlv1
  --- Logical volume ---
  LV Path                /dev/testvg/testlv1
  LV Name                testlv1
  VG Name                testvg
  LV UUID                50tB96-Uf7j-Y4hG-hkh6-T4tq-avr4-YdAf2S
  LV Write Access        read/write
  LV Creation host, time server, 2024-10-02 18:15:09 +0545
  LV Status              available
  # open                 0
  LV Size                600.00 MiB
  Current LE             75
  Segments               1
  Allocation             inherit
  Read ahead sectors     auto
  - currently set to     256
  Block device           253:2

# Formatting
[root@server ~]# mkfs -t xfs /dev/testvg/testlv1 
meta-data=/dev/testvg/testlv1    isize=512    agcount=4, agsize=38400 blks
         =                       sectsz=512   attr=2, projid32bit=1
         =                       crc=1        finobt=1, sparse=1, rmapbt=0
         =                       reflink=1    bigtime=1 inobtcount=1 nrext64=0
data     =                       bsize=4096   blocks=153600, imaxpct=25
         =                       sunit=0      swidth=0 blks
naming   =version 2              bsize=4096   ascii-ci=0, ftype=1
log      =internal log           bsize=4096   blocks=16384, version=2
         =                       sectsz=512   sunit=0 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0

# Mounting
[root@server ~]# vim /etc/fstab 
[root@server ~]# tail -1 /etc/fstab 
/dev/testvg/testlv1	/root/lvdata1	xfs	defaults	0	0

[root@server ~]# systemctl daemon-reload 
[root@server ~]# mount -a 
[root@server ~]# lsblk
NAME               MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
nvme0n4            259:6    0    5G  0 disk 
└─nvme0n4p1        259:12   0  650M  0 part 
  └─testvg-testlv1 253:2    0  600M  0 lvm  /root/lvdata1
```
---

## P23 : How would you create a logical volume, format it with XFS filesystem & EXT4 filesystem & VFAT and mount them permanently?
```bash 
#~~~~~~~ PHYSICAL DISK ~~~~~~~~~
# Creating Partitions
[root@server ~]# gdisk /dev/nvme0n4
Command (? for help): n
Partition number (2-128, default 2): 
First sector (34-10485726, default = 1333248) or {+-}size{KMGTP}: 
Last sector (1333248-10485726, default = 10485726) or {+-}size{KMGTP}: +1G
Current type is 8300 (Linux filesystem)
Hex code or GUID (L to show codes, Enter = 8300): 8e00
Changed type of partition to 'Linux LVM'

Command (? for help): n
Partition number (3-128, default 3): 
First sector (34-10485726, default = 3430400) or {+-}size{KMGTP}: 
Last sector (3430400-10485726, default = 10485726) or {+-}size{KMGTP}: +1G
Current type is 8300 (Linux filesystem)
Hex code or GUID (L to show codes, Enter = 8300): 8e00
Changed type of partition to 'Linux LVM'

Command (? for help): n
Partition number (4-128, default 4): 
First sector (34-10485726, default = 5527552) or {+-}size{KMGTP}: 
Last sector (5527552-10485726, default = 10485726) or {+-}size{KMGTP}: +1G
Current type is 8300 (Linux filesystem)
Hex code or GUID (L to show codes, Enter = 8300): 8e00
Changed type of partition to 'Linux LVM'

Command (? for help): p
Number  Start (sector)    End (sector)  Size       Code  Name
   1            2048         1333247   650.0 MiB   8E00  Linux LVM
   2         1333248         3430399   1024.0 MiB  8E00  Linux LVM
   3         3430400         5527551   1024.0 MiB  8E00  Linux LVM
   4         5527552         7624703   1024.0 MiB  8E00  Linux LVM

Command (? for help): w
The operation has completed successfully.

# Make filesystem for 2nd partition with xfs 
[root@server ~]# mkfs -t xfs /dev/nvme0n4p2 
[root@server ~]# mkfs -t ext4 /dev/nvme0n4p3 
[root@server ~]# mkfs -t vfat /dev/nvme0n4p4
[root@server ~]# blkid /dev/nvme0n4p2 
/dev/nvme0n4p2: UUID="fbb63e6b-cab7-41bd-9426-cf52b946087d" TYPE="xfs" PARTLABEL="Linux LVM" PARTUUID="37519176-32a4-4f60-9bb5-4e82042b4873"
[root@server ~]# blkid /dev/nvme0n4p3
/dev/nvme0n4p3: UUID="f3fc3e68-6813-43da-ab1f-a0b8de43afa1" TYPE="ext4" PARTLABEL="Linux LVM" PARTUUID="7d81fb42-bf66-454c-a4c0-f0534fb6fc93"
[root@server ~]# blkid /dev/nvme0n4p4
/dev/nvme0n4p4: UUID="08DB-065D" TYPE="vfat" PARTLABEL="Linux LVM" PARTUUID="b663f14e-1975-4c0e-9b3e-8beea22592a6"

#~~~~~~~~~~~ PHYSICAL VOLUME ~~~~~~~~~~~~~~
[root@server ~]# pvcreate /dev/nvme0n4p2 
[root@server ~]# pvcreate /dev/nvme0n4p3 
[root@server ~]# pvcreate /dev/nvme0n4p4

[root@server ~]# pvs 
  PV             VG     Fmt  Attr PSize   PFree 
  /dev/nvme0n1p3 cs     lvm2 a--   18.41g     0 
  /dev/nvme0n4p1 testvg lvm2 a--  648.00m 48.00m
  /dev/nvme0n4p2        lvm2 ---    1.00g  1.00g
  /dev/nvme0n4p3        lvm2 ---    1.00g  1.00g
  /dev/nvme0n4p4        lvm2 ---    1.00g  1.00g

#~~~~~~~~~~~ VOLUME GROUP ~~~~~~~~~~~~~~~~~~
[root@server ~]# vgcreate -s 10M newvg /dev/nvme0n4p2  
  Volume group "newvg" successfully created

[root@server ~]# vgextend newvg /dev/nvme0n4p3 
  Volume group "newvg" successfully extended

[root@server ~]# vgextend newvg /dev/nvme0n4p4 
  Volume group "newvg" successfully extended

[root@server ~]# vgs 
  VG     #PV #LV #SN Attr   VSize   VFree 
  cs       1   2   0 wz--n-  18.41g     0 
  newvg    3   0   0 wz--n-  <2.99g <2.99g
  testvg   1   1   0 wz--n- 648.00m 48.00m

[root@server ~]# pvs
  PV             VG     Fmt  Attr PSize    PFree   
  /dev/nvme0n1p3 cs     lvm2 a--    18.41g       0 
  /dev/nvme0n4p1 testvg lvm2 a--   648.00m   48.00m
  /dev/nvme0n4p2 newvg  lvm2 a--  1020.00m 1020.00m
  /dev/nvme0n4p3 newvg  lvm2 a--  1020.00m 1020.00m
  /dev/nvme0n4p4 newvg  lvm2 a--  1020.00m 1020.00m

#~~~~~~~~~~~~~ LOGICAL VOLUME ~~~~~~~~~~~~~~~~~
[root@server ~]# lvcreate -L 500M -n newlv2 newvg 
  Logical volume "newlv2" created.
[root@server ~]# lvcreate -L 700M -n newlv3 newvg 
  Logical volume "newlv3" created.
[root@server ~]# lvcreate -L 900M -n newlv4 newvg 
  Logical volume "newlv4" created.
[root@server ~]# lvs 
  LV      VG     Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
  root    cs     -wi-ao----  16.41g                                                    
  swap    cs     -wi-ao----   2.00g                                                    
  newlv2  newvg  -wi-a----- 500.00m                                                    
  newlv3  newvg  -wi-a----- 700.00m                                                    
  newlv4  newvg  -wi-a----- 900.00m                                                    
  testlv1 testvg -wi-ao---- 600.00m  

#~~~~~~~~~~~~~ FILESYSTEM ~~~~~~~~~~~~~~~~~~~~~
[root@server ~]# mkfs -t xfs /dev/newvg/newlv2 
[root@server ~]# mkfs -t ext4 /dev/newvg/newlv3 
[root@server ~]# mkfs -t vfat /dev/newvg/newlv4

[root@server ~]# blkid /dev/newvg/newlv2 
/dev/newvg/newlv2: UUID="58187e66-a61c-4862-b048-509b35510c9d" TYPE="xfs"
[root@server ~]# blkid /dev/newvg/newlv3 
/dev/newvg/newlv3: UUID="58a08e09-2a29-4940-8103-02db466a3ba6" TYPE="ext4"
[root@server ~]# blkid /dev/newvg/newlv4 
/dev/newvg/newlv4: UUID="83EA-1AF1" TYPE="vfat"

#~~~~~~~~~~~~ MOUNTING  ~~~~~~~~~~~~~~~~~~~~~~~
[root@server ~]# tail -3 /etc/fstab 
/dev/newvg/newlv2		/root/lvdata2	xfs	defaults	0	0
/dev/newvg/newlv3		/root/lvdata3	ext4	defaults	0	0
/dev/newvg/newlv4		/root/lvdata4	vfat	defaults	0	0

[root@server ~]# systemctl daemon-reload 
[root@server ~]# mount -a 

[root@server ~]# lsblk 
NAME               MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
nvme0n4            259:6    0    5G  0 disk 
├─nvme0n4p2        259:10   0    1G  0 part 
│ └─newvg-newlv2   253:3    0  500M  0 lvm  /root/lvdata2
├─nvme0n4p1        259:12   0  650M  0 part 
│ └─testvg-testlv1 253:2    0  600M  0 lvm  /root/lvdata1
├─nvme0n4p3        259:13   0    1G  0 part 
│ └─newvg-newlv3   253:4    0  700M  0 lvm  /root/lvdata3
└─nvme0n4p4        259:14   0    1G  0 part 
  └─newvg-newlv4   253:5    0  900M  0 lvm  /root/lvdata4

```
---

## P24 : How would you extend a logical volume that is formatted with XFS and the logical volume formatted with ext4 filesystem?
```bash 
# ~~~~~~~~~~~ XFS ~~~~~~~~~~~~~
[root@server ~]# blkid /dev/newvg/newlv2 
/dev/newvg/newlv2: UUID="58187e66-a61c-4862-b048-509b35510c9d" TYPE="xfs"

[root@server ~]# lvextend -L 600M /dev/newvg/newlv2 
  Size of logical volume newvg/newlv2 changed from 500.00 MiB (50 extents) to 600.00 MiB (60 extents).
  Logical volume newvg/newlv2 successfully resized.
[root@server ~]# xfs_growfs /dev/newvg/newlv2 
meta-data=/dev/mapper/newvg-newlv2 isize=512    agcount=4, agsize=32000 blks
         =                       sectsz=512   attr=2, projid32bit=1
         =                       crc=1        finobt=1, sparse=1, rmapbt=0
         =                       reflink=1    bigtime=1 inobtcount=1 nrext64=0
data     =                       bsize=4096   blocks=128000, imaxpct=25
         =                       sunit=0      swidth=0 blks
naming   =version 2              bsize=4096   ascii-ci=0, ftype=1
log      =internal log           bsize=4096   blocks=16384, version=2
         =                       sectsz=512   sunit=0 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0
data blocks changed from 128000 to 153600
[root@server ~]# lvdisplay /dev/newvg/newlv2 
  --- Logical volume ---
  LV Path                /dev/newvg/newlv2
  LV Name                newlv2
  VG Name                newvg
  LV UUID                EmcPDf-IVig-pQqE-e24m-8i3u-m2Z1-mj119u
  LV Write Access        read/write
  LV Creation host, time server, 2024-10-02 19:02:05 +0545
  LV Status              available
  # open                 1
  LV Size                600.00 MiB
  Current LE             60
  Segments               1
  Allocation             inherit
  Read ahead sectors     auto
  - currently set to     256
  Block device           253:3

# ~~~~~~~~~~~~ EXT4 ~~~~~~~~~~~~~~~
[root@server ~]# blkid /dev/newvg/newlv3 
/dev/newvg/newlv3: UUID="58a08e09-2a29-4940-8103-02db466a3ba6" TYPE="ext4"
[root@server ~]# lvextend -L 800M /dev/newvg/newlv3 
  Size of logical volume newvg/newlv3 changed from 700.00 MiB (70 extents) to 800.00 MiB (80 extents).
  Logical volume newvg/newlv3 successfully resized.
[root@server ~]# resize2fs /dev/newvg/newlv3 
resize2fs 1.46.5 (30-Dec-2021)
Filesystem at /dev/newvg/newlv3 is mounted on /root/lvdata3; on-line resizing required
old_desc_blocks = 1, new_desc_blocks = 1
The filesystem on /dev/newvg/newlv3 is now 204800 (4k) blocks long.

[root@server ~]# lvdisplay /dev/newvg/newlv3 
  --- Logical volume ---
  LV Path                /dev/newvg/newlv3
  LV Name                newlv3
  VG Name                newvg
  LV UUID                PGt91j-oFUW-zNym-cunM-EQ7q-JT7I-yfi1CR
  LV Write Access        read/write
  LV Creation host, time server, 2024-10-02 19:02:17 +0545
  LV Status              available
  # open                 1
  LV Size                800.00 MiB
  Current LE             80
  Segments               1
  Allocation             inherit
  Read ahead sectors     auto
  - currently set to     256
  Block device           253:4
```
---

## P25 : How would you create a stratis pool, format it with XFS and mount it permanently?
```bash 
# Installation 
[root@server ~]# rpm -q stratis-cli 
stratis-cli-3.6.0-1.el9.noarch
[root@server ~]# rpm -q stratisd 
stratisd-3.6.7-1.el9.aarch64
[root@server ~]# systemctl status stratisd 

# Creating Stratis Pool
[root@server ~]# stratis pool create stpool1 /dev/nvme0n5 
[root@server ~]# stratis pool list 
Name             Total / Used / Free    Properties                                   UUID   Alerts
stpool1   5 GiB / 526 MiB / 4.49 GiB   ~Ca,~Cr, Op   a6233246-9a07-432e-afe1-ca20746f161e   WS001 
[root@server ~]# 
[root@server ~]# stratis pool add-data stpool1 /dev/nvme0n6 
[root@server ~]# stratis pool list 
Name             Total / Used / Free    Properties                                   UUID   Alerts
stpool1   7 GiB / 530 MiB / 6.48 GiB   ~Ca,~Cr, Op   a6233246-9a07-432e-afe1-ca20746f161e         
[root@server ~]# 
[root@server ~]# stratis blockdev list stpool1 
Pool Name   Device Node    Physical Size   Tier   UUID                                
stpool1     /dev/nvme0n5           5 GiB   DATA   1cefe0d2-2a0e-49b0-91af-85452684a48b
stpool1     /dev/nvme0n6           2 GiB   DATA   5821ccf8-698a-4b25-ac46-0499805f99ce

# Filesystem
[root@server ~]# stratis filesystem create --help | less 
[root@server ~]# stratis filesystem create --help | less 
[root@server ~]# stratis filesystem create stpool1 stfs1 
[root@server ~]# stratis filesystem list 
Pool      Filesystem   Total / Used / Free / Limit            Created             Device                       UUID                                
stpool1   stfs1        1 TiB / 546 MiB / 1023.47 GiB / None   Oct 03 2024 05:06   /dev/stratis/stpool1/stfs1   e810487a-a16e-4b54-b03c-6c3942250897


# Mounting
# By default stratis has fs xfs 
[root@server ~]# vi /etc/fstab 
[root@server ~]# tail -1 /etc/fstab 
/dev/stratis/stpool1/stfs1		/root/stdata	xfs	defaults,x-systemd.requires=stratisd.service	0	0	
```
---

## P26 : How would you share a directory using NFS?
```bash 
# We do not need to create a server, we just need to access the shared folder in the client side
```
---

## P27 : How would you mount the NFS shared directory using permanently and using autofs?
```bash 
# Show exports of the server NFS
[root@server ~]# showmount -e 192.168.205.100 
Export list for 192.168.205.100:
/pis/research    192.168.205.68
/pis/development 192.168.205.68
/pis/support     192.168.205.68
/pis/training    192.168.205.68

# ~~~~~~~~~~~~~  MOUNTING TEMPORARILY  ~~~~~~~~~~~~~
[root@server ~]# mkdir nfs_mnt
[root@server ~]# mount 192.168.205.100:/pis/support /root/nfs_mnt

# ~~~~~~~~~~~~~  MOUNTING PERMANENTLY  ~~~~~~~~~~~~~
[root@server ~]# vim /etc/fstab 
[root@server ~]# tail -1 /etc/fstab 
192.168.205.100:/pis/training	/root/nfs_mnt_training	nfs	defaults	0	0
[root@server ~]# systemctl daemon-reload 
[root@server ~]# mount -a 

# ~~~~~~~~~~~~~ USING AUTOFS ~~~~~~~~~~~~~~~~~~~~~~~
# Check installed package and install
[root@server ~]# rpm -q nfs-utils 
nfs-utils-2.5.4-27.el9.aarch64

[root@server ~]# rpm -q autofs 
autofs-5.1.7-58.el9.aarch64

# Define parent folder name in auto.master
[root@server nfs_data]# vim /etc/auto.master
[root@server nfs_data]# tail -1 /etc/auto.master
/root		/etc/auto.nfs		--timeout=300

# Define the last folder name in auto.nfs
[root@server nfs_data]# tail -3 /etc/auto.nfs 
support		-rw,sync	192.168.205.100:/pis/support
training	-rw,sync	192.168.205.100:/pis/training

# Start service for autofs
[root@server nfs_data]# systemctl start autofs 
[root@server nfs_data]# systemctl enable autofs 

# Check the shared folder
[root@server nfs_data]# cd training
[root@server training]# ls
trn

[root@server nfs_data]# cd support/
[root@server support]# ls
client_sup  nfstraining  sup
```
---



## P28 : How would you create a simple container? / P29 : How would you create a container and associate with persistent storage?
```bash 
[root@server ~]# yum -y install container-tools 

# For other user, you need to enable 
[root@server ~]# loginctl enable-linger student
[root@server ~]# loginctl 
SESSION  UID USER    SEAT  TTY  STATE  IDLE SINCE
      3 1001 student seat0 tty2 active no   

# Create a folder if not present 
[student@server containers]$ pwd
/home/student/.config/containers

# Create a file registry.conf
[student@server containers]$ cat registries.conf 
unqualified-search-registries=["docker.io"]
[[registry]]
insecure=true
blocked=false
location="docker.io"

# Search for the base image
[student@server containers]$ podman search httpd 
NAME                              DESCRIPTION
docker.io/library/httpd           The Apache HTTP Server Project
docker.io/manageiq/httpd          Container with httpd, built on CentOS for Ma...

# Create containerfile for custom image 
[student@server ~]$ vim Containerfile 
[student@server ~]$ cat Containerfile 
FROM docker.io/library/httpd
MAINTAINER kcsanjeeb091@gmail.com
COPY ./index.html /usr/local/apach2/httpd

# Create index.html inside webdata/htdocs
[student@server htdocs]$ cat index.html 
<h1>Persistant Volume Website</h1>

# Build custom image using Containerfile
[student@server ~]$ podman build -t customhttpd .
STEP 1/3: FROM docker.io/library/httpd
Trying to pull docker.io/library/httpd:latest...
Getting image source signatures
Copying blob f5db40045454 done   | 
Copying blob 0ffcdbb5bd41 done   | 
Copying blob 4f4fb700ef54 done   | 
Copying blob ac0ad684e55d done   | 
Copying blob b59792d2b7f1 done   | 
Copying blob 14c9d9d19932 done   | 
Copying config a3e79aafef done   | 
Writing manifest to image destination
STEP 2/3: MAINTAINER kcsanjeeb091@gmail.com
--> 4a50d33aabac
STEP 3/3: COPY ./index.html /usr/local/apach2/httpd
COMMIT customhttpd
--> 3d0b77972f06
Successfully tagged localhost/customhttpd:latest
3d0b77972f06ab2995fed5ba6e503e2e7745324f37fae8494251772f6fd304d3

# View the new custom image created
[student@server ~]$ podman images
REPOSITORY               TAG         IMAGE ID      CREATED         SIZE
localhost/customhttpd    latest      3d0b77972f06  27 seconds ago  182 MB
docker.io/library/httpd  latest      a3e79aafef7f  2 months ago    182 MB

# Run the container using volume
[student@server ~]$ podman run -d --name wwwserver -p 7788:80 -v /home/student/webdata/htdocs:/usr/local/apache2/htdocs:Z localhost/customhttpd:latest 
838f2fba143807daeccedaf8997fa73ca7260551d42fdb34601abc31abe02760

# Test 
[student@server ~]$ curl localhost:7788
<h1>Persistant Volume Website</h1>
[student@server ~]$ vim webdata/htdocs/index.html 
[student@server ~]$ curl localhost:7788
<h1>v2: Persistant Volume Website</h1>
```
---

## P30 : How would you convert the container into service so that it gets started automatically during boot-time?
```bash 
# Stop the container
[student@server user]$ podman ps 
CONTAINER ID  IMAGE       COMMAND     CREATED     STATUS      PORTS       NAMES
[student@server user]$ podman ps -a 
CONTAINER ID  IMAGE                         COMMAND           CREATED         STATUS                    PORTS                         NAMES
e397b3159ea7  localhost/customhttpd:latest  httpd-foreground  11 seconds ago  Exited (0) 4 seconds ago  0.0.0.0:7788->80/tcp, 80/tcp  wwwserver

# Generate systemd container-[container name].service
[student@server user]$ podman generate systemd --name wwwserver --files --new

DEPRECATED command:
It is recommended to use Quadlets for running containers and pods under systemd.

Please refer to podman-systemd.unit(5) for details.
/home/student/.config/systemd/user/container-wwwserver.service
[student@server user]$ ls
container-wwwserver.service

# Login using the SSH of the user <ssh username@ip_address>
# Enable, Start and check status 
[student@server user]$ systemctl --user enable container-wwwserver.service 
Created symlink /home/student/.config/systemd/user/default.target.wants/container-wwwserver.service → /home/student/.config/systemd/user/container-wwwserver.service.
[student@server user]$ systemctl --user start container-wwwserver.service 
[student@server user]$ systemctl --user status container-wwwserver.service 
Failed to execute 'pager', will try 'less' next: Permission denied
● container-wwwserver.service - Podman container-wwwserver.service
     Loaded: loaded (/home/student/.config/systemd/user/container-wwwserver.service; enabled; preset: dis>
     Active: active (running) since Fri 2024-10-04 08:56:00 +0545; 16s ago
       Docs: man:podman-generate-systemd(1)
   Main PID: 7825 (conmon)
      Tasks: 2 (limit: 22564)
     Memory: 14.2M
        CPU: 53ms
     CGroup: /user.slice/user-1001.slice/user@1001.service/app.slice/container-wwwserver.service
             ├─7822 /usr/bin/pasta --config-net -t 7788-7788:80-80 --dns-forward 169.254.0.1 -u none -T n>
             └─7825 /usr/bin/conmon --api-version 1 -c 5f250f60e2fef95973bb7eaaae052b8ebb807402267ca6bbc2>

# The container will be in running state
[student@server user]$ podman ps 
CONTAINER ID  IMAGE                         COMMAND           CREATED         STATUS         PORTS                         NAMES
5f250f60e2fe  localhost/customhttpd:latest  httpd-foreground  20 seconds ago  Up 20 seconds  0.0.0.0:7788->80/tcp, 80/tcp  wwwserver

# Reboot and check


##~~~~~~ TO RUN AS A SERVICE FROM ROOT USER~~~~~~~
# The Correct Location
[root@server system]# pwd
/etc/systemd/system
[root@server system]# podman generate systemd --name customhttpdserver --files --new 

# Enable and Start
[root@server system]# systemctl enable container-customhttpdserver.service 
Created symlink /etc/systemd/system/default.target.wants/container-customhttpdserver.service → /etc/systemd/system/container-customhttpdserver.service.
[root@server system]# systemctl start container-customhttpdserver.service 
[root@server system]# podman ps 
CONTAINER ID  IMAGE                              COMMAND           CREATED        STATUS        PORTS                         NAMES
bf808b9c7608  localhost/customhttpdimage:latest  httpd-foreground  2 seconds ago  Up 3 seconds  0.0.0.0:8000->80/tcp, 80/tcp  customhttpdserver


```
---

## P31 : How would you ensure that the files are created with 444 permissions during creation time?
```bash 
# 777 - ??? = 0022 / 755 (dir)
# 666 - ??? = 0022 / 644 (file)
[root@server ~]# umask 222
[root@server ~]# touch newfile2 
[root@server ~]# ls -lh newfile2 
-r--r--r--. 1 root root 0 Oct  4 09:57 newfile2
```
---

## P32 : How would you search files that are larger than 512 KB and less than 1M?
```bash 
[root@server ~]# find / -type f -size +10k -size -1M 
```
---

## P33 : How would you find the files that have SUID & SGID bit set on them?
```bash 
# Find files with the SUID bit set:
[root@server ~]# find / -perm /4000 -type f 
# Find files with the SGID bit set:
[root@server ~]# find / -perm /2000 -type f 
```
---