---
title: "Lesson 5.4: Extend existing logical volumes"
description:
date: "2024-04-04"
parent: "Chapter 5: Create and configure file systems"
grand_parent : "Redhat Enterprise Linux 9 - EX200 RHCSA"
order: 4
completed: true
---
### Creating an LV with size 1GB
```bash
[root@serverB ~]# pvs
  PV             VG Fmt  Attr PSize  PFree
  /dev/nvme0n1p3 cs lvm2 a--  18.41g    0
  /dev/nvme0n3      lvm2 ---   5.00g 5.00g

[root@serverB ~]# vgcreate loanvg /dev/nvme0n3
  WARNING: adding device /dev/nvme0n3 with idname eui.49a27ef18fc92b2f000c296bd0741985 which is already used for missing device.
  Volume group "loanvg" successfully created
[root@serverB ~]# vgs
  VG     #PV #LV #SN Attr   VSize  VFree
  cs       1   2   0 wz--n- 18.41g     0
  loanvg   1   0   0 wz--n- <5.00g <5.00g

[root@serverB ~]# lvs
  LV   VG Attr       LSize  Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
  root cs -wi-ao---- 16.41g
  swap cs -wi-ao----  2.00g

[root@serverB ~]# lvcreate -L 1G --name eduloanlv loanvg
  Logical volume "eduloanlv" created.
[root@serverB ~]# lvs
  LV        VG     Attr       LSize  Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
  root      cs     -wi-ao---- 16.41g
  swap      cs     -wi-ao----  2.00g
  eduloanlv loanvg -wi-a-----  1.00g
```

### Extending the size of LV with +1GB 
```bash 
[root@serverB ~]# lvextend -L +1G /dev/loanvg/eduloanlv
  Size of logical volume loanvg/eduloanlv changed from 1.00 GiB (256 extents) to 2.00 GiB (512 extents).
  Logical volume loanvg/eduloanlv successfully resized.

[root@serverB ~]# lvs
  LV        VG     Attr       LSize  Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
  root      cs     -wi-ao---- 16.41g
  swap      cs     -wi-ao----  2.00g
  eduloanlv loanvg -wi-a-----  2.00g
```

### Extending size as well as file

```bash 
[root@serverB ~]# vim /etc/fstab
[root@serverB ~]# tail -1 /etc/fstab
/dev/loanvg/eduloanlv	/mnt/eduloanlv_dir	xfs	defaults	0	0

[root@serverB ~]# mkfs -t xfs /dev/loanvg/eduloanlv
meta-data=/dev/loanvg/eduloanlv  isize=512    agcount=4, agsize=131072 blks
         =                       sectsz=512   attr=2, projid32bit=1
         =                       crc=1        finobt=1, sparse=1, rmapbt=0
         =                       reflink=1    bigtime=1 inobtcount=1 nrext64=0
data     =                       bsize=4096   blocks=524288, imaxpct=25
         =                       sunit=0      swidth=0 blks
naming   =version 2              bsize=4096   ascii-ci=0, ftype=1
log      =internal log           bsize=4096   blocks=16384, version=2
         =                       sectsz=512   sunit=0 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0

[root@serverB ~]# systemctl daemon-reload
[root@serverB ~]# mount -a
[root@serverB ~]# lsblk
NAME               MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
nvme0n3            259:5    0    5G  0 disk
└─loanvg-eduloanlv 253:2    0    2G  0 lvm  /mnt/eduloanlv_dir

[root@serverB ~]# df -h
Filesystem                      Size  Used Avail Use% Mounted on
/dev/mapper/loanvg-eduloanlv    2.0G   47M  1.9G   3% /mnt/eduloanlv_dir

# Extening again +1GB
[root@serverB ~]# lvextend -L +1G /dev/loanvg/eduloanlv
  Size of logical volume loanvg/eduloanlv changed from 2.00 GiB (512 extents) to 3.00 GiB (768 extents).
  Logical volume loanvg/eduloanlv successfully resized.
[root@serverB ~]# lvs
  LV        VG     Attr       LSize  Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
  root      cs     -wi-ao---- 16.41g
  swap      cs     -wi-ao----  2.00g
  eduloanlv loanvg -wi-ao----  3.00g
[root@serverB ~]# df -h
Filesystem                      Size  Used Avail Use% Mounted on
/dev/mapper/loanvg-eduloanlv    2.0G   47M  1.9G   3% /mnt/eduloanlv_dir

# Extending the filesystem
[root@serverB ~]# xfs_growfs /dev/loanvg/eduloanlv
[root@serverB ~]# df -h
Filesystem                      Size  Used Avail Use% Mounted on
/dev/mapper/loanvg-eduloanlv    3.0G   54M  2.9G   2% /mnt/eduloanlv_dir
```


